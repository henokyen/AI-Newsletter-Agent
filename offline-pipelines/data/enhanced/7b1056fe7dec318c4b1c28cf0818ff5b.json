{
    "id": "7b1056fe7dec318c4b1c28cf0818ff5b",
    "metadata": {
        "id": "7b1056fe7dec318c4b1c28cf0818ff5b",
        "url": "https://huggingface.co/vidore/colpali-v1.2/",
        "title": "vidore/colpali-v1.2 Â· Hugging Face",
        "properties": {
            "description": "Weâ€™re on a journey to advance and democratize artificial intelligence through open source and open science.",
            "keywords": null,
            "author": null,
            "og:title": "vidore/colpali-v1.2 Â· Hugging Face",
            "og:type": "website",
            "og:url": "https://huggingface.co/vidore/colpali-v1.2",
            "og:image": "https://cdn-thumbnails.huggingface.co/social-thumbnails/models/vidore/colpali-v1.2.png",
            "twitter:card": "summary_large_image",
            "twitter:site": "@huggingface",
            "twitter:image": "https://cdn-thumbnails.huggingface.co/social-thumbnails/models/vidore/colpali-v1.2.png"
        }
    },
    "parent_metadata": {
        "id": "89ba6efc611fc6a0565a4d9b31fc2bf0",
        "url": "https://www.notion.so/Document-preprocessing-e-g-HTML-PDF-89ba6efc611fc6a0565a4d9b31fc2bf0",
        "title": "Document preprocessing (e.g., HTML, PDF)",
        "properties": {
            "Type": "Leaf"
        }
    },
    "content": "[![Hugging Face's logo](https://huggingface.co/front/assets/huggingface_logo-noborder.svg) Hugging Face](https://huggingface.co/)\n  * [ Models](https://huggingface.co/models)\n  * [ Datasets](https://huggingface.co/datasets)\n  * [ Spaces](https://huggingface.co/spaces)\n  * [ Posts](https://huggingface.co/posts)\n  * [ Docs](https://huggingface.co/docs)\n  * [ Enterprise](https://huggingface.co/enterprise)\n  * [Pricing](https://huggingface.co/pricing)\n  * [Log In](https://huggingface.co/login)\n  * [Sign Up](https://huggingface.co/join)\n\n\n# \n[![](https://cdn-avatars.huggingface.co/v1/production/uploads/6264f9655f6f2e14d6ac981c/48Z31MM2apXsj6rQWilUh.png)](https://huggingface.co/vidore)\n[vidore](https://huggingface.co/vidore)\n/\n[colpali-v1.2](https://huggingface.co/vidore/colpali-v1.2)\nlike 106\nFollow\n![](https://cdn-avatars.huggingface.co/v1/production/uploads/6264f9655f6f2e14d6ac981c/48Z31MM2apXsj6rQWilUh.png) Illuin Technology - Vidore 245\n[ Visual Document Retrieval ](https://huggingface.co/models?pipeline_tag=visual-document-retrieval)[ ColPali ](https://huggingface.co/models?library=colpali)[ Safetensors ](https://huggingface.co/models?library=safetensors)\nvidore/colpali_train_set\n[ English ](https://huggingface.co/models?language=en)[ vidore ](https://huggingface.co/models?other=vidore)[ vidore-experimental ](https://huggingface.co/models?other=vidore-experimental)\narxiv: 2004.12832\narxiv: 2407.01449\narxiv: 2106.09685\nLicense: mit\n[ Model card ](https://huggingface.co/vidore/colpali-v1.2)[ Files Files and versions ](https://huggingface.co/vidore/colpali-v1.2/tree/main)[ Community 11 ](https://huggingface.co/vidore/colpali-v1.2/discussions)\nUse this model \nA newer version of this model is available: [vidore/colpali-v1.3](https://huggingface.co/vidore/colpali-v1.3)\n  * [ColPali: Visual Retriever based on PaliGemma-3B with ColBERT strategy](https://huggingface.co/vidore/colpali-v1.2/#colpali-visual-retriever-based-on-paligemma-3b-with-colbert-strategy \"ColPali: Visual Retriever based on PaliGemma-3B with ColBERT strategy\")\n    * [Version specificity](https://huggingface.co/vidore/colpali-v1.2/#version-specificity \"Version specificity\")\n    * [Model Description](https://huggingface.co/vidore/colpali-v1.2/#model-description \"Model Description\")\n    * [Model Training](https://huggingface.co/vidore/colpali-v1.2/#model-training \"Model Training\")\n      * [Dataset](https://huggingface.co/vidore/colpali-v1.2/#dataset \"Dataset\")\n      * [Parameters](https://huggingface.co/vidore/colpali-v1.2/#parameters \"Parameters\")\n    * [Usage](https://huggingface.co/vidore/colpali-v1.2/#usage \"Usage\")\n    * [Limitations](https://huggingface.co/vidore/colpali-v1.2/#limitations \"Limitations\")\n    * [License](https://huggingface.co/vidore/colpali-v1.2/#license \"License\")\n    * [Contact](https://huggingface.co/vidore/colpali-v1.2/#contact \"Contact\")\n    * [Citation](https://huggingface.co/vidore/colpali-v1.2/#citation \"Citation\")\n\n\n#  [ ](https://huggingface.co/vidore/colpali-v1.2/#colpali-visual-retriever-based-on-paligemma-3b-with-colbert-strategy) ColPali: Visual Retriever based on PaliGemma-3B with ColBERT strategy \nColPali is a model based on a novel model architecture and training strategy based on Vision Language Models (VLMs) to efficiently index documents from their visual features. It is a [PaliGemma-3B](https://huggingface.co/google/paligemma-3b-mix-448) extension that generates [ColBERT](https://arxiv.org/abs/2004.12832)- style multi-vector representations of text and images. It was introduced in the paper [ColPali: Efficient Document Retrieval with Vision Language Models](https://arxiv.org/abs/2407.01449) and first released in [this repository](https://github.com/ManuelFay/colpali)\n![](https://github.com/illuin-tech/colpali/blob/main/assets/colpali_architecture.webp?raw=true)\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#version-specificity) Version specificity \nThis version is trained with `colpali-engine==0.2.0` but can be loaded for any version `>=0.2.0`.\nCompared to [`vidore/colpali`](https://huggingface.co/vidore/colpali), this version is trained with right padding for queries to fix unwanted tokens in the query encoding. It also stems from the fixed `vidore/colpaligemma-3b-pt-448-base` to guarantee deterministic projection layer initialization. It was trained for 5 epochs, with in-batch negatives and hard mined negatives and a warmup of 1000 steps (10x longer) to help reduce non-english language collapse.\nData is the same as the ColPali data described in the paper.\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#model-description) Model Description \nThis model is built iteratively starting from an off-the-shelf [SigLIP](https://huggingface.co/google/siglip-so400m-patch14-384) model. We finetuned it to create [BiSigLIP](https://huggingface.co/vidore/bisiglip) and fed the patch-embeddings output by SigLIP to an LLM, [PaliGemma-3B](https://huggingface.co/google/paligemma-3b-mix-448) to create [BiPali](https://huggingface.co/vidore/bipali). \nOne benefit of inputting image patch embeddings through a language model is that they are natively mapped to a latent space similar to textual input (query). This enables leveraging the [ColBERT](https://arxiv.org/abs/2004.12832) strategy to compute interactions between text tokens and image patches, which enables a step-change improvement in performance compared to BiPali. \n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#model-training) Model Training \n###  [ ](https://huggingface.co/vidore/colpali-v1.2/#dataset) Dataset \nOur training dataset of 127,460 query-page pairs is comprised of train sets of openly available academic datasets (63%) and a synthetic dataset made up of pages from web-crawled PDF documents and augmented with VLM-generated (Claude-3 Sonnet) pseudo-questions (37%). Our training set is fully English by design, enabling us to study zero-shot generalization to non-English languages. We explicitly verify no multi-page PDF document is used both [_ViDoRe_](https://huggingface.co/collections/vidore/vidore-benchmark-667173f98e70a1c0fa4db00d) and in the train set to prevent evaluation contamination. A validation set is created with 2% of the samples to tune hyperparameters.\n_Note: Multilingual data is present in the pretraining corpus of the language model (Gemma-2B) and potentially occurs during PaliGemma-3B's multimodal training._\n###  [ ](https://huggingface.co/vidore/colpali-v1.2/#parameters) Parameters \nAll models are trained for 1 epoch on the train set. Unless specified otherwise, we train models in `bfloat16` format, use low-rank adapters ([LoRA](https://arxiv.org/abs/2106.09685)) with `alpha=32` and `r=32` on the transformer layers from the language model, as well as the final randomly initialized projection layer, and use a `paged_adamw_8bit` optimizer. We train on an 8 GPU setup with data parallelism, a learning rate of 5e-5 with linear decay with 2.5% warmup steps, and a batch size of 32.\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#usage) Usage \nInstall [`colpali-engine`](https://github.com/illuin-tech/colpali):\n```\npip install colpali-engine>=0.3.0,<0.4.0\n\n```\n\nThen run the following code:\n```\nfrom typing import cast\nimport torch\nfrom PIL import Image\nfrom colpali_engine.models import ColPali, ColPaliProcessor\nmodel_name = \"vidore/colpali-v1.2\"\nmodel = ColPali.from_pretrained(\n  model_name,\n  torch_dtype=torch.bfloat16,\n  device_map=\"cuda:0\", # or \"mps\" if on Apple Silicon\n).eval()\nprocessor = ColPaliProcessor.from_pretrained(model_name)\n# Your inputs\nimages = [\n  Image.new(\"RGB\", (32, 32), color=\"white\"),\n  Image.new(\"RGB\", (16, 16), color=\"black\"),\n]\nqueries = [\n  \"Is attention really all you need?\",\n  \"Are Benjamin, Antoine, Merve, and Jo best friends?\",\n]\n# Process the inputs\nbatch_images = processor.process_images(images).to(model.device)\nbatch_queries = processor.process_queries(queries).to(model.device)\n# Forward pass\nwith torch.no_grad():\n  image_embeddings = model(**batch_images)\n  query_embeddings = model(**batch_queries)\nscores = processor.score_multi_vector(query_embeddings, image_embeddings)\n\n```\n\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#limitations) Limitations \n  * **Focus** : The model primarily focuses on PDF-type documents and high-ressources languages, potentially limiting its generalization to other document types or less represented languages.\n  * **Support** : The model relies on multi-vector retreiving derived from the ColBERT late interaction mechanism, which may require engineering efforts to adapt to widely used vector retrieval frameworks that lack native multi-vector support.\n\n\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#license) License \nColPali's vision language backbone model (PaliGemma) is under `gemma` license as specified in its [model card](https://huggingface.co/google/paligemma-3b-mix-448). The adapters attached to the model are under MIT license.\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#contact) Contact \n  * Manuel Faysse: manuel.faysse@illuin.tech\n  * Hugues Sibille: hugues.sibille@illuin.tech\n  * Tony Wu: tony.wu@illuin.tech\n\n\n##  [ ](https://huggingface.co/vidore/colpali-v1.2/#citation) Citation \nIf you use any datasets or models from this organization in your research, please cite the original dataset as follows:\n```\n@misc{faysse2024colpaliefficientdocumentretrieval,\n title={ColPali: Efficient Document Retrieval with Vision Language Models}, \n author={Manuel Faysse and Hugues Sibille and Tony Wu and Bilel Omrani and Gautier Viaud and CÃ©line Hudelot and Pierre Colombo},\n year={2024},\n eprint={2407.01449},\n archivePrefix={arXiv},\n primaryClass={cs.IR},\n url={https://arxiv.org/abs/2407.01449}, \n}\n\n```\n\n\nDownloads last month\n    74,384 \nInference Providers [NEW](https://huggingface.co/blog/inference-providers)\n[ Visual Document Retrieval](https://huggingface.co/tasks/visual-document-retrieval \"Learn more about visual-document-retrieval\")\nThis model isn't deployed by any Inference Provider. [ðŸ™‹ Ask for provider support](https://huggingface.co/spaces/huggingface/InferenceSupport/discussions/new?title=vidore/colpali-v1.2&description=React%20to%20this%20comment%20with%20an%20emoji%20to%20vote%20for%20%5Bvidore%2Fcolpali-v1.2%5D\\(%2Fvidore%2Fcolpali-v1.2\\)%20to%20be%20supported%20by%20Inference%20Providers.%0A%0A\\(optional\\)%20Which%20providers%20are%20you%20interested%20in%3F%20\\(Novita%2C%20Hyperbolic%2C%20Together%E2%80%A6\\)%0A)\nHF Inference deployability: The HF Inference API does not support visual-document-retrieval models for colpali library.\n##  Model tree for vidore/colpali-v1.2 [](https://huggingface.co/docs/hub/model-cards#specifying-a-base-model)\nBase model\n[google/paligemma-3b-pt-448](https://huggingface.co/google/paligemma-3b-pt-448)\nFinetuned\n[vidore/colpaligemma-3b-pt-448-base](https://huggingface.co/vidore/colpaligemma-3b-pt-448-base)\nFinetuned\n([43](https://huggingface.co/models?other=base_model:finetune:vidore/colpaligemma-3b-pt-448-base)) \nthis model \n##  Dataset used to train vidore/colpali-v1.2\n#### [vidore/colpali_train_set Viewer â€¢  Updated Sep 4, 2024 â€¢  119k â€¢  2.13k â€¢  78  ](https://huggingface.co/datasets/vidore/colpali_train_set)\n##  Spaces using vidore/colpali-v1.2 27\n[ðŸ‘€ vespa-engine/colpali-vespa-visual-retrieval](https://huggingface.co/spaces/vespa-engine/colpali-vespa-visual-retrieval)[ðŸ’¬ AdrienB134/rag_ColPali_Qwen2VL](https://huggingface.co/spaces/AdrienB134/rag_ColPali_Qwen2VL)[ðŸ† chiayewken/multimodal-longdoc-qwen2-vl](https://huggingface.co/spaces/chiayewken/multimodal-longdoc-qwen2-vl)[ðŸ‘€ p3nguknight/colpali-pixtral](https://huggingface.co/spaces/p3nguknight/colpali-pixtral)[ðŸ  AdithyaSK/VARAG](https://huggingface.co/spaces/AdithyaSK/VARAG)[ðŸ’¬ AdrienB134/rag_colpali_idefics3](https://huggingface.co/spaces/AdrienB134/rag_colpali_idefics3)[ðŸ”·ðŸ”·ðŸ”· arad1367/Multimodal_RAG_Pejman](https://huggingface.co/spaces/arad1367/Multimodal_RAG_Pejman)[ðŸ˜» saumitras/colpali-milvus](https://huggingface.co/spaces/saumitras/colpali-milvus)[ðŸ©º geekyrakshit/medrag](https://huggingface.co/spaces/geekyrakshit/medrag)[ðŸ’¬ Rahatara/rag_ColPali_Qwen2VL](https://huggingface.co/spaces/Rahatara/rag_ColPali_Qwen2VL)[ðŸ¨ ultron1996/multimodal_rag](https://huggingface.co/spaces/ultron1996/multimodal_rag)[ðŸ¨ lukiod/streamlit_qwen2_withbyaldi](https://huggingface.co/spaces/lukiod/streamlit_qwen2_withbyaldi) + 22 Spaces + 15 Spaces\n##  Collection including vidore/colpali-v1.2\n#### [ColPali Models Collection  Pre-trained checkpoints for the ColPali model. â€¢  8 items â€¢  Updated Jan 23 â€¢ 5](https://huggingface.co/collections/vidore/colpali-models-673a5676abddf84949ce3180)\nSystem theme \nCompany\n[TOS](https://huggingface.co/terms-of-service) [Privacy](https://huggingface.co/privacy) [About](https://huggingface.co/huggingface) [Jobs](https://apply.workable.com/huggingface/) [](https://huggingface.co/)\nWebsite\n[Models](https://huggingface.co/models) [Datasets](https://huggingface.co/datasets) [Spaces](https://huggingface.co/spaces) [Pricing](https://huggingface.co/pricing) [Docs](https://huggingface.co/docs)\n",
    "content_quality_score": 0.6,
    "summary": null,
    "child_urls": [
        "https://huggingface.co/",
        "https://huggingface.co/models",
        "https://huggingface.co/datasets",
        "https://huggingface.co/spaces",
        "https://huggingface.co/posts",
        "https://huggingface.co/docs",
        "https://huggingface.co/enterprise",
        "https://huggingface.co/pricing",
        "https://huggingface.co/login",
        "https://huggingface.co/join",
        "https://huggingface.co/vidore",
        "https://huggingface.co/vidore/colpali-v1.2",
        "https://huggingface.co/models?pipeline_tag=visual-document-retrieval",
        "https://huggingface.co/models?library=colpali",
        "https://huggingface.co/models?library=safetensors",
        "https://huggingface.co/models?language=en",
        "https://huggingface.co/models?other=vidore",
        "https://huggingface.co/models?other=vidore-experimental",
        "https://huggingface.co/vidore/colpali-v1.2/tree/main",
        "https://huggingface.co/vidore/colpali-v1.2/discussions",
        "https://huggingface.co/vidore/colpali-v1.3",
        "https://huggingface.co/vidore/colpali-v1.2/#colpali-visual-retriever-based-on-paligemma-3b-with-colbert-strategy",
        "https://huggingface.co/vidore/colpali-v1.2/#version-specificity",
        "https://huggingface.co/vidore/colpali-v1.2/#model-description",
        "https://huggingface.co/vidore/colpali-v1.2/#model-training",
        "https://huggingface.co/vidore/colpali-v1.2/#dataset",
        "https://huggingface.co/vidore/colpali-v1.2/#parameters",
        "https://huggingface.co/vidore/colpali-v1.2/#usage",
        "https://huggingface.co/vidore/colpali-v1.2/#limitations",
        "https://huggingface.co/vidore/colpali-v1.2/#license",
        "https://huggingface.co/vidore/colpali-v1.2/#contact",
        "https://huggingface.co/vidore/colpali-v1.2/#citation",
        "https://huggingface.co/google/paligemma-3b-mix-448",
        "https://huggingface.co/vidore/colpali",
        "https://huggingface.co/google/siglip-so400m-patch14-384",
        "https://huggingface.co/vidore/bisiglip",
        "https://huggingface.co/vidore/bipali",
        "https://huggingface.co/collections/vidore/vidore-benchmark-667173f98e70a1c0fa4db00d",
        "https://huggingface.co/blog/inference-providers",
        "https://huggingface.co/tasks/visual-document-retrieval",
        "https://huggingface.co/spaces/huggingface/InferenceSupport/discussions/new?title=vidore/colpali-v1.2&description=React%20to%20this%20comment%20with%20an%20emoji%20to%20vote%20for%20%5Bvidore%2Fcolpali-v1.2%5D(%2Fvidore%2Fcolpali-v1.2)%20to%20be%20supported%20by%20Inference%20Providers.%0A%0A(optional)%20Which%20providers%20are%20you%20interested%20in%3F%20(Novita%2C%20Hyperbolic%2C%20Together%E2%80%A6)%0A",
        "https://huggingface.co/docs/hub/model-cards#specifying-a-base-model",
        "https://huggingface.co/google/paligemma-3b-pt-448",
        "https://huggingface.co/vidore/colpaligemma-3b-pt-448-base",
        "https://huggingface.co/models?other=base_model:finetune:vidore/colpaligemma-3b-pt-448-base",
        "https://huggingface.co/datasets/vidore/colpali_train_set",
        "https://huggingface.co/spaces/vespa-engine/colpali-vespa-visual-retrieval",
        "https://huggingface.co/spaces/AdrienB134/rag_ColPali_Qwen2VL",
        "https://huggingface.co/spaces/chiayewken/multimodal-longdoc-qwen2-vl",
        "https://huggingface.co/spaces/p3nguknight/colpali-pixtral",
        "https://huggingface.co/spaces/AdithyaSK/VARAG",
        "https://huggingface.co/spaces/AdrienB134/rag_colpali_idefics3",
        "https://huggingface.co/spaces/arad1367/Multimodal_RAG_Pejman",
        "https://huggingface.co/spaces/saumitras/colpali-milvus",
        "https://huggingface.co/spaces/geekyrakshit/medrag",
        "https://huggingface.co/spaces/Rahatara/rag_ColPali_Qwen2VL",
        "https://huggingface.co/spaces/ultron1996/multimodal_rag",
        "https://huggingface.co/spaces/lukiod/streamlit_qwen2_withbyaldi",
        "https://huggingface.co/collections/vidore/colpali-models-673a5676abddf84949ce3180",
        "https://huggingface.co/terms-of-service",
        "https://huggingface.co/privacy",
        "https://huggingface.co/huggingface",
        "https://arxiv.org/abs/2004.12832",
        "https://arxiv.org/abs/2407.01449",
        "https://github.com/ManuelFay/colpali",
        "https://arxiv.org/abs/2106.09685",
        "https://github.com/illuin-tech/colpali",
        "mailto:manuel.faysse@illuin.tech",
        "mailto:hugues.sibille@illuin.tech",
        "mailto:tony.wu@illuin.tech",
        "https://apply.workable.com/huggingface/"
    ]
}